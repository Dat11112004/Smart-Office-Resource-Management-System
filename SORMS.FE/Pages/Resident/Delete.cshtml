@{
    ViewData["Title"] = "Xóa cư dân";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var id = Context.Request.RouteValues["id"];
}

<div class="container mt-5 text-center">
    <h4>Bạn có chắc muốn xóa cư dân này?</h4>
    <div class="mt-3">
        <button id="confirmDelete" class="btn btn-danger">Xóa</button>
        <a href="/Resident/Index" class="btn btn-secondary">Hủy</a>
    </div>
</div>

@section Scripts {
    <script>
        document.getElementById("confirmDelete").addEventListener("click", async () => {
            const res = await fetch(`/api/Resident/${"@id"}`, {
                method: "DELETE",
                headers: { "Authorization": "Bearer " + localStorage.getItem("token") }
            });
            if (res.ok) {
                alert("Đã xóa thành công!");
                window.location.href = "/Resident/Index";
            } else alert("Không thể xóa cư dân!");
        });
    </script>
}
