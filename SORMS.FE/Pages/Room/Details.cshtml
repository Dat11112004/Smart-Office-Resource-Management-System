@{
    ViewData["Title"] = "Chi tiết phòng";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var id = Context.Request.RouteValues["id"];
}
<div class="container mt-4" style="max-width:720px;">
    <h3>Chi tiết phòng</h3>
    <div id="roomCard" class="mt-3 p-3 border rounded bg-light"></div>

    <div class="mt-3">
        <a id="editBtn" class="btn btn-warning">Sửa</a>
        <a href="/Room/Index" class="btn btn-secondary ms-2">Quay lại</a>
    </div>
</div>

@section Scripts {
    <script>
        const roomId = "@id";

        async function loadRoom() {
            const token = localStorage.getItem("token");
            const res = await fetch(`/api/Room/${roomId}`, {
                headers: { "Authorization": "Bearer " + token }
            });
            if (!res.ok) {
                alert('Không lấy được chi tiết phòng.');
                return;
            }
            const r = await res.json();
            const div = document.getElementById('roomCard');
            div.innerHTML = `
                <p><strong>ID:</strong> ${r.id}</p>
                <p><strong>Tên phòng:</strong> ${r.name ?? '—'}</p>
                <p><strong>Loại:</strong> ${r.type ?? '—'}</p>
                <p><strong>Giá:</strong> ${r.price != null ? Number(r.price).toLocaleString() + ' VNĐ' : '—'}</p>
                <p><strong>Trạng thái:</strong> ${r.isAvailable ? '<span class="badge bg-success">Còn trống</span>' : '<span class="badge bg-danger">Đã thuê</span>'}</p>
            `;
            document.getElementById('editBtn').setAttribute('href', '/Room/Edit/' + r.id);
        }

        document.addEventListener('DOMContentLoaded', loadRoom);
    </script>
}
